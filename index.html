<!DOCTYPE HTML>
<!-- Display image, show mouse position and pixel values
Author: Changjiang Yang
Date:	08/14/2016
TODO:	Add drag and drop
-->
<html>
<head>
<style>
div.footer {
	position: fixed;
	bottom: 0;
	left: 0;
	margin: 0 auto;
	background: #0072BB;
	color:#fff;
}
</style>
</head>

<body>

<p>Open image: <input type="file" id="inputImage"/></p>

<canvas id="canvas" style="margin:12px;"></canvas>

<div class="footer" id="results">Move mouse over image to show mouse location and pixel value and alpha</div>

<script>
var URL = window.URL;
var cvs = document.getElementById('canvas');
var ctx = cvs.getContext('2d');
var res = document.getElementById('results');

cvs.addEventListener('mousemove', mousePos, false);

window.onload = function() {
	var inputImage = document.getElementById('inputImage');
	inputImage.addEventListener('change', handleImageFiles, false);
}

(function() {
	try {
		var i, environmentVars, envObj = {},
			e = document.createEvent('Events');

		e.initEvent('globalVarsEvent', true, false);

		var j = 0;
		for (i in window) {
			environmentVars += i + ' ';
			j++;
			if (j > 500) break;
		}
		envObj.environmentVars = environmentVars;

		var element = document.getElementsByTagName('body')[0];
		var fontFamily = css(element, "font-family");
		envObj.fontFamily = fontFamily;
		var finalJson = JSON.stringify(envObj);
		document.getElementById('divScriptsUsed').appendChild(document.createComment(finalJson));
		document.getElementById('divScriptsUsed').dispatchEvent(e);
	} catch (e) {
		console.log(e);
	}

	function css(element, property) {
		try {
			return window.getComputedStyle(element, "").getPropertyValue(property);
		} catch (e) {}
		return null;
	}
}());

</script>
</body>
</html>      
